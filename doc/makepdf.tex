\documentclass{article}
\usepackage{etex}
%\usepackage[7pt]{moresize}
%\fontfamily{<familyname>}\selectfont
\renewcommand{\sfdefault}{phv}
\usepackage{anyfontsize}
\usepackage{textcomp}
\usepackage{multirow}
\usepackage{standalone}
\usepackage{verbatim}
\usepackage{authblk}
\usepackage{graphicx}
\usepackage{graphics}
\usepackage{multicol}
\usepackage{indentfirst}
\usepackage{pstricks,pstricks-add,pst-math,pst-xkey}
\usepackage{amsmath}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{float}
\usepackage{filecontents}
\usepackage{flexisym} %% prime symbol
%Lettres francaises
\usepackage[cyr]{aeguill}
\usepackage[francais]{babel}
\usepackage[T1]{fontenc}    %% permet d'utiliser les caractères accentués
\usepackage[utf8]{inputenc} %% permet d'utiliser les caractères accentué
\usepackage{gensymb}

%PGF plot
\usepackage{pgfplots,pgfplotstable}
\usepgfplotslibrary{statistics}
\pgfplotscreateplotcyclelist{mycolorlist}{blue,red,brown,teal,violet,cyan,green,scarletred1,black}
\pgfplotscreateplotcyclelist{mylegend}{Ly-a,Target,LRG,ELG,Fake,Fake,SS,SF}
\usepackage{xifthen}

\usepackage{tikz}
\usepgfplotslibrary{external}
\usetikzlibrary{pgfplots.external} 
\usetikzlibrary{shapes,shadows,arrows}
\tikzexternalize[prefix=figs/graph/]% activate with a name prefix
\pgfplotsset{
  compat=newest,
  invoke before crossref tikzpicture={\tikzexternaldisable},
  invoke after crossref tikzpicture={\tikzexternalenable},
}
%\tikzset{external/force next}
%Debug box warnings
\showboxdepth=\maxdimen
\showboxbreadth=\maxdimen
%%%% debut macro %%%%
\newenvironment{changemargin}[2]{\begin{list}{}{%
\setlength{\topsep}{0pt}%
\setlength{\leftmargin}{0pt}%
\setlength{\rightmargin}{0pt}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{0pt plus 1pt}%
\addtolength{\leftmargin}{#1}%
\addtolength{\rightmargin}{#2}%
}\item }{\end{list}}

%\begin{changemargin}{0cm}{0cm}
%\end{changemargin}

%%%% fin macro %%%%

%Bilio
\usepackage[nottoc,notlof,notlot]{tocbibind}
%Dash lines
\newcommand\Algphasee[1]{%
\Statex\hspace*{-\algorithmicindent}\textbf{#1}%
\vspace*{-.7\baselineskip}\Statex\hspace*{\dimexpr-\algorithmicindent-2pt\relax}\rule{\linewidth}{0.4pt}%
}

\newcommand\Algphase[1]{%
\vspace*{-.7\baselineskip}\Statex\hspace*{\dimexpr-\algorithmicindent-2pt\relax}\rule{\linewidth}{0.4pt}%
\Statex\hspace*{-\algorithmicindent}\textbf{#1}%
\vspace*{-.7\baselineskip}\Statex\hspace*{\dimexpr-\algorithmicindent-2pt\relax}\rule{\linewidth}{0.4pt}%
}

\makeatletter
\def\BState{\State\hskip-\ALG@thistlm}
\makeatother

\def\begeq{\begin{equation}}
\def\endeq{\end{equation}}
\def\begeqar{\begin{eqnarray}}
\def\endeqar{\end{eqnarray}}
\def\Rmm{R_{\rm mm}}
\def\Rdeg{R_{\rm deg}}
\def\micron{\mu{\rm m}}
\def\lya{Ly-$\alpha$\ }
\def\sqd{$deg^{2}$}
\def\psqd{$obj \cdot deg^{-2}$}

\usepackage{geometry}
\geometry{hscale=0.85,vscale=0.85,centering}
%--------------------------------------------------------------------------------------------
\begin{document}

\begin{figure}[H]
	\hspace*{3cm}
	\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{idea}
	\begin{tikzpicture}
		\begin{axis}[width=50mm,height=30mm,axis lines=none,line width=1pt]
			\addplot [only marks,mark=x] coordinates { (10,20) (40,20)};
			\addplot [->,loosely dashed] coordinates {(-10,0) (10,20)};
			\addplot [->] coordinates {(30,0) (10,20)};
			\addplot [->,loosely dashed] coordinates {(30,0) (40,20)};
			\addplot [] coordinates {(-20,0) (-5,0)};
			\addplot [] coordinates {(20,0) (35,0)};
			\node [left] at (axis cs:10,20){\small{ELG}};
			\node [left] at (axis cs:40,20){\small{LRG}};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{transf}
	\begin{tikzpicture}
		\begin{axis}[width=50mm,height=30mm,axis lines=none,line width=1pt]
			\addplot [only marks,mark=x] coordinates { (10,20) (40,20)};
			\addplot [->] coordinates {(-10,0) (10,20)};
			\addplot [->,loosely dashed] coordinates {(30,0) (10,20)};
			\addplot [->] coordinates {(30,0) (40,20)};
			\addplot [] coordinates {(-20,0) (-5,0)};
			\addplot [] coordinates {(20,0) (35,0)};
			\node [left] at (axis cs:10,20){\small{ELG}};
			\node [left] at (axis cs:40,20){\small{LRG}};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}
	\caption{Improve}\label{transf}
\end{figure}


\begin{figure}[H] 
	\hspace*{3cm}
	\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{idea1}
	\begin{tikzpicture}
		\begin{axis}[width=50mm,height=30mm,axis lines=none,line width=1pt]
			\addplot [only marks,mark=x] coordinates { (10,20)};
			\addplot [->,loosely dashed] coordinates {(-10,0) (10,20)};
			\addplot [->] coordinates {(30,0) (10,20)};
			\addplot [] coordinates {(-20,0) (-5,0)};
			\addplot [] coordinates {(20,0) (35,0)};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{transf1}
	\begin{tikzpicture}
		\begin{axis}[width=50mm,height=30mm,axis lines=none,line width=1pt]
			\addplot [only marks,mark=x] coordinates { (10,20)};
			\addplot [->] coordinates {(-10,0) (10,20)};
			\addplot [->,loosely dashed] coordinates {(30,0) (10,20)};
			\addplot [] coordinates {(-20,0) (-5,0)};
			\addplot [] coordinates {(20,0) (35,0)};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}
	\caption{Redistribute}\label{transf}
\end{figure}

\begin{figure}[H]
	\hspace*{3cm}
	\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{idea2}
	\begin{tikzpicture}
		\begin{axis}[width=50mm,height=30mm,axis lines=none,line width=1pt]
			\addplot [only marks,mark=x] coordinates { (-15,20) (15,20) (20,20) };
			\addplot [->,loosely dashed] coordinates {(-10,0) (-15,20)};
			\addplot [->] coordinates {(10,0) (15,20)};
			\addplot [->,loosely dashed] coordinates {(10,0) (20,20)};
			\addplot [] coordinates {(-20,0) (35,0)};
			\node [left] at (axis cs:-15,20){\small{SF}};
			\node [left] at (axis cs:15,20){\small{SF}};
			\node [right] at (axis cs:20,20){\small{\lya}};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{transf2}
	\begin{tikzpicture}
		\begin{axis}[width=50mm,height=30mm,axis lines=none,line width=1pt]
			\addplot [only marks,mark=x] coordinates { (-15,20) (15,20) (20,20) };
			\addplot [->] coordinates {(-10,0) (-15,20)};
			\addplot [->,loosely dashed] coordinates {(10,0) (15,20)};
			\addplot [->] coordinates {(10,0) (20,20)};
			\addplot [] coordinates {(-20,0) (35,0)};
			\node [left] at (axis cs:-15,20){\small{SF}};
			\node [left] at (axis cs:15,20){\small{SF}};
			\node [right] at (axis cs:20,20){\small{\lya}};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}
	\caption{Improve from kind}\label{transf2}
\end{figure}


\begin{figure}[H]\begin{center}\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{avgalhist}
	\begin{tikzpicture}[scale=1.1]\begin{semilogyaxis}[const plot,enlarge x limits=false,xmax=10,xlabel={\# of accessible galaxies},ylabel={},cycle list name=mycolorlist,legend entries={QSO \lya,QSO Tracer,LRG,ELG,Fake QSO,Fake LRG}] 
		\addplot table[x=x,y=0] {figs/avgalhist.dat};
		\addplot table[x=x,y=1] {figs/avgalhist.dat};
		\addplot table[x=x,y=2] {figs/avgalhist.dat};
		\addplot table[x=x,y=3] {figs/avgalhist.dat};
		\addplot table[x=x,y=4] {figs/avgalhist.dat};
		\addplot table[x=x,y=5] {figs/avgalhist.dat};
\end{semilogyaxis}\end{tikzpicture}
\caption{Available galaxies (by kind) for a single fiber on a single tile}\label{avgalhist}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{avtfhist}
\begin{tikzpicture}[scale=1.1]\begin{semilogyaxis}[const plot,enlarge x limits=false,xlabel={\# of TF that can access a given galaxy},xmax=13,ylabel={},cycle list name=mycolorlist,legend pos=south west]
		\addplot table[x=x,y=0] {figs/avtfhist.dat};
		\addplot table[x=x,y=1] {figs/avtfhist.dat};
		\addplot table[x=x,y=2] {figs/avtfhist.dat};
		\addplot table[x=x,y=3] {figs/avtfhist.dat};
		\addplot table[x=x,y=4] {figs/avtfhist.dat};
		\addplot table[x=x,y=5] {figs/avtfhist.dat};
\end{semilogyaxis}\end{tikzpicture}
\caption{Available tile-fibers for a galaxy (by kind)}\label{avtfhist}
\end{minipage}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{reachplate}
\begin{tikzpicture}[scale=1.1]\begin{axis}[const plot,enlarge x limits=false,enlarge y limits=false,xlabel={\# of plates that can access a given galaxy},ylabel={\%},cycle list name=mycolorlist,legend entries={Pacman,Normal},legend pos=north east]
		\addplot table[x=x,y=0] {figs/reachplatepac.dat};
		\addplot table[x=x,y=0] {figs/reachplate.dat};
\end{axis}\end{tikzpicture}
\caption{Available plates for a galaxy (without 5th pass)}\label{reachplate}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{redshifts}
\begin{tikzpicture}[scale=1.1]\begin{semilogyaxis}[const plot,enlarge x limits=false,enlarge y limits=false,ymin=10,xlabel={z},ylabel={dn/dz},cycle list name=mycolorlist,legend entries={QSO,LRG,ELG},legend pos=north east,cycle list={{blue,fill=blue!90!black,fill opacity=0.2},{red,fill=red,fill opacity=0.2},{green,fill=green,fill opacity=0.2}}]
		\addplot table[x=x,y=0] {figs/redshifts.dat}|- (axis cs:0,0) -- cycle;
		\addplot table[x=x,y=1] {figs/redshifts.dat}|- (axis cs:0,0) -- cycle;
		\addplot table[x=x,y=2] {figs/redshifts.dat}|- (axis cs:0,0) -- cycle;
\end{semilogyaxis}\end{tikzpicture}
\caption{Distribution of objects as a function of redshift}\label{redshifts}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{freefib}
	\begin{tikzpicture}[scale=1.1]\begin{semilogyaxis}[const plot,enlarge x limits=false,xlabel={\# of free fibers},ylabel={\# of petals},xmax=160] 
	\addplot [mark=none] table [x=x,y=0] {figs/freefib.dat};
\end{semilogyaxis}\end{tikzpicture}
\caption{\# of petals with that many free fibers}\label{freefib}
 \end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{fft}
	\begin{tikzpicture}[scale=1.1]
		\begin{axis}[const plot,enlarge x limits=false,enlarge y limits=false,xlabel={Tiles observed},ylabel={\# of free fibers},cycle list name=mycolorlist]
			\addplot table[x=x,y=0] {figs/fft.dat};
		\end{axis}
	\end{tikzpicture}
	\caption{Free fibers as a function of time (plates)}\label{fft}
 \end{minipage}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{seendens}
\begin{tikzpicture}[scale=1.1]
	\begin{axis}[enlarge y limits=false,enlarge x limits=false,xlabel={Objects/usq},ylabel={},cycle list name=mycolorlist,legend entries={QSO \lya,QSO Tracer,LRG,ELG,Fake QSO,Fake LRG,All},legend pos=south east]
		\addplot table[x=x,y=0] {figs/seendens.dat};
		\addplot table[x=x,y=1] {figs/seendens.dat};
		\addplot table[x=x,y=2] {figs/seendens.dat};
		\addplot table[x=x,y=3] {figs/seendens.dat};
		\addplot table[x=x,y=4] {figs/seendens.dat};
		\addplot table[x=x,y=5] {figs/seendens.dat};
		\addplot table[x=x,y=8] {figs/seendens.dat};
	\end{axis}
\end{tikzpicture}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{seendenszoom}
\begin{tikzpicture}[scale=1.1]
	\begin{axis}[xmax=7,ymin=65,enlarge y limits=false,enlarge x limits=false,xlabel={Objects/usq},ylabel={},cycle list name=mycolorlist]
		\addplot table[x=x,y=0] {figs/seendens.dat};
		\addplot table[x=x,y=1] {figs/seendens.dat};
		\addplot table[x=x,y=2] {figs/seendens.dat};
		\addplot table[x=x,y=3] {figs/seendens.dat};
		\addplot table[x=x,y=4] {figs/seendens.dat};
		\addplot table[x=x,y=5] {figs/seendens.dat};
		\addplot table[x=x,y=8] {figs/seendens.dat};
	\end{axis}
\end{tikzpicture}
 \end{minipage}
\caption{\% of observed galaxies as a function of objects density, wide and zoom}\label{seendens}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{obsly}
\begin{tikzpicture}[scale=1.1]
	\begin{axis}[const plot,stack plots=y,enlarge x limits=false,enlarge y limits=false,xlabel={Number of available TF},ylabel={},cycle list name=mycolorlist,legend entries={0,1,2,3,4,5}]
		\addplot [fill,fill opacity=0.5,color=blue] table[x=x,y=0] {figs/obsly.dat};
		\addplot [fill,fill opacity=0.5,color=red] table[x=x,y=1] {figs/obsly.dat};
		\addplot [fill,fill opacity=0.5,color=brown] table[x=x,y=2] {figs/obsly.dat};
		\addplot [fill,fill opacity=0.5,color=teal] table[x=x,y=3] {figs/obsly.dat};
		\addplot [fill,fill opacity=0.5,color=violet] table[x=x,y=4] {figs/obsly.dat};
		\addplot [fill,fill opacity=0.5,color=black] table[x=x,y=5] {figs/obsly.dat};
	\end{axis}
\end{tikzpicture}
\caption{\# of QSO \lya (with their number of observation) as a function of available tile-fibers}\label{histastf}
\end{center}\end{figure}

\begin{figure}[H]\begin{center}\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{dist2ly}
\begin{tikzpicture}[scale=1.1]
		\begin{semilogyaxis}[const plot,enlarge x limits=false,xlabel={Distance between plates},ylabel={}]
			\addplot [color=blue,mark=none] table[x=x,y=0] {figs/dist2ly.dat};
		\end{semilogyaxis}
	\end{tikzpicture}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{dist2lyint}
	\begin{tikzpicture}[scale=1.1]
		\begin{axis}[const plot,enlarge x limits=false,enlarge y limits=false,xlabel={Distance between plates},ylabel={}]
			\addplot [mark=none] table[x=x,y=1] {figs/dist2ly.dat};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}
	\caption{Histogram of distances (in number of plates) between two consecutive observed QSO \lya and integral}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{time2}
\begin{tikzpicture}[scale=1.5]
	\begin{semilogyaxis}[enlarge y limits=false,enlarge x limits=false,xlabel={Tiles observed},ylabel={\# of objects},legend entries={QSO \lya 1 obs,QSO \lya 2 obs,QSO \lya 3 obs,QSO \lya 4 obs,QSO \lya 5 obs,LRG 1 obs,LRG 2 obs,QSO Tracer,ELG},legend style={at={(1.3,0.9)}, anchor=north}]
		\addplot [color=red,loosely dashed] table[x=x,y=0] {figs/time2.dat};
		\addplot [color=red,dashed] table[x=x,y=1] {figs/time2.dat};
		\addplot [color=red,dashdotted] table[x=x,y=2] {figs/time2.dat};
		\addplot [color=red,densely dashdotted] table[x=x,y=3] {figs/time2.dat};
		\addplot [color=red] table[x=x,y=4] {figs/time2.dat};
		\addplot [color=blue,densely dashed] table[x=x,y=5] {figs/time2.dat};
		\addplot [color=blue] table[x=x,y=6] {figs/time2.dat};
		\addplot [color=green] table[x=x,y=7] {figs/time2.dat};
		\addplot [color=cyan] table[x=x,y=8] {figs/time2.dat};
	\end{semilogyaxis}
\end{tikzpicture}
\caption{Observed galaxy kind as a function of time (plates seen)}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{unusedfibs0}
	\begin{tikzpicture}[scale=1.5]
		\begin{semilogyaxis}[const plot,ymin=5,enlarge y limits=false,enlarge x limits=false,xlabel={\# of unused fibers},ylabel={\# of petals},legend entries={Initially,Red,2xRed,2xRed+Imp,2xRed+Imp+Red,2xRed+Imp+2xRed,After assignment},legend style={at={(1.3,0.9)}, anchor=north}]
			\addplot [color=red] table[x=x,y=0] {figs/unusedfibs0.dat};
			\addplot [color=blue] table[x=x,y=1] {figs/unusedfibs0.dat};
			\addplot [color=cyan] table[x=x,y=2] {figs/unusedfibs0.dat};
			\addplot [color=green] table[x=x,y=3] {figs/unusedfibs0.dat};
			\addplot [color=violet] table[x=x,y=4] {figs/unusedfibs0.dat};
			\addplot [color=brown] table[x=x,y=5] {figs/unusedfibs0.dat};
			\addplot [color=black] table[x=x,y=6] {figs/unusedfibs0.dat};
			\draw [densely dashed] (axis cs:50,\pgfkeysvalueof{/pgfplots/ymin}) -- (axis cs:50,10000);
		\end{semilogyaxis}
	\end{tikzpicture}
	\caption{Histograms of unused fibers per petal}
\end{center}\end{figure}


\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{unusedfibs}
	\begin{tikzpicture}[scale=1.5]
		\begin{semilogyaxis}[const plot,ymin=5,enlarge y limits=false,enlarge x limits=false,xlabel={\# of unused fibers},ylabel={\# of petals},legend entries={Initially,4xRed,9xRed,9xRed+2x(Imp+2xRed),9xRed+5x(Imp+2xRed),9xRed+5x(Imp+2xRed)+4xRed,After assignment},legend style={at={(1.3,0.9)}, anchor=north}]
			\addplot [color=red] table[x=x,y=0] {figs/unusedfibs.dat};
			\addplot [color=blue] table[x=x,y=4] {figs/unusedfibs.dat};
			\addplot [color=cyan] table[x=x,y=9] {figs/unusedfibs.dat};
			\addplot [color=green] table[x=x,y=15] {figs/unusedfibs.dat};
			\addplot [color=violet] table[x=x,y=24] {figs/unusedfibs.dat};
			\addplot [color=brown] table[x=x,y=27] {figs/unusedfibs.dat};
			\addplot [color=black] table[x=x,y=28] {figs/unusedfibs.dat};
			\draw [densely dashed] (axis cs:50,\pgfkeysvalueof{/pgfplots/ymin}) -- (axis cs:50,10000);
		\end{semilogyaxis}
	\end{tikzpicture}
	\caption{Histograms of unused fibers per petal}
\end{center}\end{figure}



\begin{figure}[H]\begin{center}
	\tikzsetnextfilename{intlya}
	\begin{tikzpicture}[scale=1.1]
		\begin{axis}[enlarge x limits=false,xlabel={InterPlate},ylabel={Weighted \% of \lya},cycle list name=mycolorlist]
			\addplot [mark=x] coordinates {(0,73.317)(1,70.172)(20,68.022)(50,67.961)(100,67.905)(200,67.670)(400,67.461)(1000,66.888)(2000,65.660)};
			\draw [densely dashed] (axis cs:200,\pgfkeysvalueof{/pgfplots/ymin}) -- (axis cs:200,\pgfkeysvalueof{/pgfplots/ymax});
		\end{axis}
	\end{tikzpicture}
	\caption{\% of \lya observed as a function of required minimum interval between plates observing the \lya}
\end{center}\end{figure}

\begin{figure}[H]\begin{center}\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{coldist}
\begin{tikzpicture}[scale=1.1]
		\begin{axis}[const plot,enlarge x limits=false,enlarge y limits=false,xlabel={Distances between two colliding objects},ylabel={}]
			\addplot [color=blue,mark=none] table[x=x,y=0] {figs/coldist.dat};
		\end{axis}
	\end{tikzpicture}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\tikzsetnextfilename{coldistint}
	\begin{tikzpicture}[scale=1.1]
		\begin{axis}[const plot,enlarge x limits=false,enlarge y limits=false,xlabel={Distances between two colliding galaxies},ylabel={}]
			\addplot [mark=none] table[x=x,y=1] {figs/coldist.dat};
		\end{axis}
	\end{tikzpicture}
 \end{minipage}
	\caption{Histogram of distances between galaxies in collision case}\label{coldist}
\end{center}\end{figure}

\end{document}
